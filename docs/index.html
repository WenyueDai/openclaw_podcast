<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>
<title>Daily Podcast</title>
<style>
:root { --bg:#eef7ef; --bg2:#f7f4e9; --card:#fffdf6; --text:#2d3d33; --muted:#6d7f71; --accent:#4f8f6a; --line:#dbe7d9; }
* { box-sizing:border-box; }
body { margin:0; font-family:"Hiragino Sans","Noto Sans JP",Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:linear-gradient(160deg,var(--bg),var(--bg2)); color:var(--text); }
.layout { display:flex; gap:20px; max-width:1200px; margin:0 auto; padding:28px 16px 40px; }
.main-col { flex:1; min-width:0; }
.sidebar { width:220px; flex-shrink:0; transition:width .25s,opacity .25s; overflow:hidden; }
.sidebar.collapsed { width:0; opacity:0; pointer-events:none; }
.sidebar h3 { margin:0 0 10px; font-size:.95rem; color:var(--accent); display:flex; justify-content:space-between; align-items:center; }
.month-group { margin-bottom:6px; border:1px solid var(--line); border-radius:8px; overflow:hidden; }
.month-group summary { padding:6px 10px; font-size:.85rem; font-weight:600; color:var(--text); cursor:pointer; list-style:none; display:flex; justify-content:space-between; align-items:center; background:var(--bg2); }
.month-group summary::-webkit-details-marker { display:none; }
.month-group[open] summary { border-bottom:1px solid var(--line); }
.ep-count { font-weight:400; color:var(--muted); font-size:.78rem; }
.month-group ul { margin:0; padding:6px 10px; list-style:none; background:var(--card); }
.month-group li { margin:4px 0; font-size:.82rem; display:flex; align-items:center; gap:4px; }
.new-badge { color:var(--accent); font-size:.7rem; }
.archive-toggle { position:fixed; right:16px; top:50%; transform:translateY(-50%); z-index:50; background:var(--accent); color:#fff; border:none; border-radius:50%; width:38px; height:38px; font-size:1rem; cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,.2); display:flex; align-items:center; justify-content:center; }
h1 { margin:0 0 6px; letter-spacing:.3px; }
.sub { color:var(--muted); margin-bottom:8px; font-size:.92rem; }
.about { background:var(--card); border:1px solid var(--line); border-radius:14px; padding:14px 18px; margin-bottom:18px; font-size:.88rem; line-height:1.65; color:var(--text); }
.about p { margin:0 0 8px; }
.about p:last-child { margin:0; }
.about .note { font-size:.82rem; color:var(--muted); border-top:1px solid var(--line); padding-top:8px; margin-top:8px; }
.card { background:var(--card); border:1px solid var(--line); border-radius:18px; padding:16px; margin:14px 0; box-shadow:0 10px 22px rgba(79,143,106,.12); }
h2 { margin:0 0 4px; font-size:1.1rem; }
.meta { color:var(--muted); margin:0 0 8px; font-size:.88rem; }
a { color:var(--accent); text-decoration:none; }
a:hover { text-decoration:underline; }
audio { width:100%; margin:4px 0 6px; }
.speed-row { margin:0 0 8px; font-size:.88rem; color:var(--muted); }
.speed-row button { font-size:.82rem; padding:1px 7px; margin-right:3px; border:1px solid var(--line); border-radius:5px; background:var(--bg2); cursor:pointer; }
.abstract h3 { margin:8px 0 5px; font-size:.95rem; color:#4c6f5a; }
.abstract ul { margin:0; padding-left:0; list-style:none; }
.abstract li { margin:5px 0; line-height:1.45; padding:4px 6px; border-radius:6px; transition:background .15s,border-left .15s; border-left:3px solid transparent; }
.abstract li:hover { background:rgba(79,143,106,.07); }
.abstract li.playing { background:rgba(79,143,106,.15); border-left:3px solid var(--accent); }
.item-row { display:flex; align-items:baseline; gap:6px; }
.cb-wrap { display:flex; align-items:baseline; gap:5px; cursor:pointer; flex:1; min-width:0; }
.star-cb { accent-color:var(--accent); width:14px; height:14px; flex-shrink:0; cursor:pointer; }
.num { color:var(--muted); font-size:.82rem; font-weight:600; min-width:28px; flex-shrink:0; }
.num.seekable { color:var(--accent); cursor:pointer; }
.num.seekable:hover { text-decoration:underline; }
.src { color:var(--muted); font-size:.85rem; }
.summary { color:var(--muted); font-size:.87rem; margin-left:48px; display:block; }
.tip { font-size:.75rem; font-weight:400; color:var(--muted); }
.feedback-bar { margin-top:10px; padding:10px 12px; background:var(--bg2); border:1px solid var(--line); border-radius:10px; font-size:.88rem; }
.feedback-bar button { padding:4px 12px; border:1px solid var(--accent); border-radius:6px; background:var(--accent); color:#fff; cursor:pointer; font-size:.85rem; margin-right:8px; }
.feedback-bar button.sec { background:transparent; color:var(--accent); }
#fb-status { color:var(--muted); font-size:.82rem; }
.modal-bg { display:none; position:fixed; inset:0; background:rgba(0,0,0,.4); z-index:100; align-items:center; justify-content:center; }
.modal-bg.open { display:flex; }
.modal { background:#fff; border-radius:14px; padding:22px; max-width:420px; width:90%; }
.modal h3 { margin:0 0 10px; }
.modal input { width:100%; padding:7px 10px; border:1px solid var(--line); border-radius:7px; font-size:.9rem; margin-bottom:10px; }
.modal p { font-size:.82rem; color:var(--muted); margin:0 0 12px; }
.modal .btn-row { display:flex; gap:8px; }
.modal button { flex:1; padding:7px; border-radius:7px; border:1px solid var(--accent); cursor:pointer; font-size:.88rem; }
.modal .save { background:var(--accent); color:#fff; }
.modal .cancel { background:transparent; color:var(--accent); }
</style>
</head>
<body>
<button class="archive-toggle" onclick="toggleArchive()" title="Toggle archive">ðŸ“š</button>
<div class="layout">
  <div class="main-col">
    <h1>Daily Podcast</h1>
    <p class='sub'>Daily autogenerated science podcast</p>
    <div class="about">
      <p>A daily auto-generated podcast for protein designers. Every morning an AI pipeline scans the latest publications from Nature, arXiv, PNAS, PubMed, and key researcher feeds â€” selects the most relevant papers on <strong>protein design, antibody engineering, enzyme design, and computational biology</strong> â€” then writes and narrates a ~60-minute digest using a large language model and text-to-speech synthesis.</p>
      <p>Papers are ranked by journal quality, topic relevance, and the owner's personal reading history. The podcast is regenerated fresh each day and published here automatically via GitHub Actions. Only the 3 most recent episodes are shown here â€” click the <strong>ðŸ“š</strong> button (right side of the page) to browse the full archive, or visit the <a href="https://clear-squid-8e3.notion.site/3155f58ea8c280258959fba00c0149ab?v=3155f58ea8c2803c8c0d000c76d1bfba" target="_blank">Notion collection</a> to read every daily digest in full.</p>
      <p class="note">&#128274; <strong>Note on the checkboxes:</strong> The paper list below includes checkboxes and a "Save feedback" button. These are for the <em>site owner only</em> â€” checking papers and saving requires a private GitHub token stored in your own browser. If you are a visitor, feel free to browse and listen, but the feedback feature will not work for you and your selections are never recorded anywhere.</p>
    </div>
    
<section class='card'>
  <h2>Daily Podcast 2026-02-28</h2>
  <p class='meta'>Published: 2026-02-28 <a href="podcast_script_2026-02-28_llm.txt">script</a></p>
  <audio id="audio-2026-02-28" controls src="https://github.com/WenyueDai/openclaw_podcast/releases/download/episode-2026-02-28/podcast_2026-02-28.mp3"></audio>
  <p class='speed-row'>Speed:
    <button onclick="setRate(1)">1x</button>
    <button onclick="setRate(1.2)">1.2x</button>
    <button onclick="setRate(1.5)">1.5x</button>
    <button onclick="setRate(2)">2x</button>
  </p>
  <div class="abstract"><h3>Papers &amp; News (3) <span class="tip">â˜‘ check interesting ones â†’ Save feedback</span></h3><ul><li data-url="https://example.com/paper2" data-date="2026-02-28" data-seg="0" data-ts="0.0"><div class="item-row"><span class="num seekable" onclick="seekTo(this,event)">[1]</span><label class="cb-wrap"><input type="checkbox" class="star-cb" data-url="https://example.com/paper2" data-date="2026-02-28" data-source="Cell" data-title="Antibody engineering using directed evolution improves binding"> <a href="https://example.com/paper2" target="_blank">Antibody engineering using directed evolution improves binding</a> <span class="src">â€” Cell</span></label></div><br><span class="summary">Directed evolution improved antibody binding affinity by 100-fold.</span></li><li data-url="https://example.com/paper3" data-date="2026-02-28" data-seg="1" data-ts="152.13"><div class="item-row"><span class="num seekable" onclick="seekTo(this,event)">[2]</span><label class="cb-wrap"><input type="checkbox" class="star-cb" data-url="https://example.com/paper3" data-date="2026-02-28" data-source="Science" data-title="Enzyme design for sustainable pharmaceutical synthesis"> <a href="https://example.com/paper3" target="_blank">Enzyme design for sustainable pharmaceutical synthesis</a> <span class="src">â€” Science</span></label></div><br><span class="summary">De novo enzyme design enables green synthesis of pharmaceuticals.</span></li><li data-url="https://example.com/paper1" data-date="2026-02-28" data-seg="1" data-ts="154.42"><div class="item-row"><span class="num seekable" onclick="seekTo(this,event)">[3]</span><label class="cb-wrap"><input type="checkbox" class="star-cb" data-url="https://example.com/paper1" data-date="2026-02-28" data-source="Nature Methods" data-title="Deep learning model predicts protein folding from sequence alone"> <a href="https://example.com/paper1" target="_blank">Deep learning model predicts protein folding from sequence alone</a> <span class="src">â€” Nature Methods</span></label></div><br><span class="summary">A new transformer model achieves state-of-the-art accuracy on protein structure prediction.</span></li></ul></div>
</section>
    <div class="feedback-bar">
      <strong>Your selections:</strong>
      <span id="sel-count">0 checked</span> &nbsp;
      <button onclick="saveFeedback()">Save feedback to GitHub</button>
      <button class="sec" onclick="openSettings()">âš™ Settings</button>
      <span id="fb-status"></span>
    </div>
  </div>
  <aside class="sidebar" id="archive-panel"><h3>Archive</h3><details open class="month-group"><summary>February 2026 <span class="ep-count">(1)</span></summary><ul><li><a href="https://github.com/WenyueDai/openclaw_podcast/releases/download/episode-2026-02-28/podcast_2026-02-28.mp3" target="_blank">2026-02-28</a> <span class="new-badge">âœ¦</span></li></ul></details></aside>
</div>

<!-- Settings modal -->
<div class="modal-bg" id="settings-modal">
  <div class="modal">
    <h3>GitHub Settings</h3>
    <p>Your token is stored only in this browser (localStorage). It's used to commit your paper selections back to the repo so the ranking can learn from them.</p>
    <input type="password" id="gh-token-input" placeholder="GitHub personal access token (repo scope)">
    <input type="text" id="gh-repo-input" placeholder="owner/repo  e.g. WenyueDai/openclaw_podcast">
    <div class="btn-row">
      <button class="save" onclick="saveSettings()">Save</button>
      <button class="cancel" onclick="closeSettings()">Cancel</button>
    </div>
  </div>
</div>

<script>
// â”€â”€ Restore checkbox states from localStorage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function storageKey(date) { return 'feedback_' + date; }

function loadCheckboxes() {
  document.querySelectorAll('.star-cb').forEach(cb => {
    const date = cb.dataset.date, url = cb.dataset.url;
    const saved = JSON.parse(localStorage.getItem(storageKey(date)) || '[]');
    if (saved.includes(url)) cb.checked = true;
  });
  updateCount();
}

function saveCheckboxes() {
  const byDate = {};
  document.querySelectorAll('.star-cb').forEach(cb => {
    if (!byDate[cb.dataset.date]) byDate[cb.dataset.date] = [];
    if (cb.checked) byDate[cb.dataset.date].push(cb.dataset.url);
  });
  for (const [date, urls] of Object.entries(byDate)) {
    localStorage.setItem(storageKey(date), JSON.stringify(urls));
  }
  updateCount();
}

function updateCount() {
  const n = document.querySelectorAll('.star-cb:checked').length;
  document.getElementById('sel-count').textContent = n + ' checked';
}

document.querySelectorAll('.star-cb').forEach(cb => {
  cb.addEventListener('change', saveCheckboxes);
});

// â”€â”€ Playback speed â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setRate(v) { document.querySelectorAll('audio').forEach(a => a.playbackRate = v); }

// â”€â”€ Settings modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openSettings() {
  document.getElementById('gh-token-input').value = localStorage.getItem('gh_token') || '';
  document.getElementById('gh-repo-input').value = localStorage.getItem('gh_repo') || 'WenyueDai/openclaw_podcast';
  document.getElementById('settings-modal').classList.add('open');
}
function closeSettings() { document.getElementById('settings-modal').classList.remove('open'); }
function saveSettings() {
  localStorage.setItem('gh_token', document.getElementById('gh-token-input').value.trim());
  localStorage.setItem('gh_repo', document.getElementById('gh-repo-input').value.trim());
  closeSettings();
  setStatus('Settings saved.');
}

// â”€â”€ Save feedback to GitHub â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setStatus(msg) { document.getElementById('fb-status').textContent = msg; }

async function saveFeedback() {
  const token = localStorage.getItem('gh_token') || '';
  const repo  = localStorage.getItem('gh_repo')  || 'WenyueDai/openclaw_podcast';
  if (!token) { openSettings(); return; }

  // Gather checked items per date (url + source + title for smarter ranking)
  const selections = {};
  document.querySelectorAll('.star-cb:checked').forEach(cb => {
    if (!selections[cb.dataset.date]) selections[cb.dataset.date] = [];
    selections[cb.dataset.date].push({
      url: cb.dataset.url,
      source: cb.dataset.source || '',
      title: cb.dataset.title || '',
    });
  });
  if (!Object.keys(selections).length) { setStatus('Nothing checked.'); return; }

  setStatus('Savingâ€¦');
  const path = 'openclaw-knowledge-radio/state/feedback.json';
  const apiBase = 'https://api.github.com/repos/' + repo;
  const headers = {
    'Authorization': 'Bearer ' + token,
    'Accept': 'application/vnd.github+json',
    'X-GitHub-Api-Version': '2022-11-28',
    'Content-Type': 'application/json',
  };

  try {
    // Get current file (to obtain SHA and merge existing data)
    let existing = {}, sha = null;
    const get = await fetch(apiBase + '/contents/' + path, {headers});
    if (get.ok) {
      const meta = await get.json();
      sha = meta.sha;
      existing = JSON.parse(atob(meta.content.replace(/\n/g,'')));
    }

    // Merge new selections with existing
    for (const [date, urls] of Object.entries(selections)) {
      const prev = existing[date] || [];
      existing[date] = [...new Set([...prev, ...urls])];
    }

    const body = { message: 'Update feedback ' + new Date().toISOString().slice(0,10),
                    content: btoa(unescape(encodeURIComponent(JSON.stringify(existing, null, 2)))) };
    if (sha) body.sha = sha;

    const put = await fetch(apiBase + '/contents/' + path, {
      method: 'PUT', headers, body: JSON.stringify(body)
    });
    if (put.ok) {
      setStatus('âœ“ Saved! Ranking will improve from tomorrow.');
    } else {
      const err = await put.json();
      setStatus('Error: ' + (err.message || put.status));
    }
  } catch(e) { setStatus('Error: ' + e.message); }
}

// â”€â”€ Archive toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleArchive() {
  const panel = document.getElementById('archive-panel');
  const btn = document.querySelector('.archive-toggle');
  const collapsed = panel.classList.toggle('collapsed');
  btn.textContent = collapsed ? 'ðŸ“š' : 'âœ•';
  localStorage.setItem('archive_open', collapsed ? '0' : '1');
}
// Start collapsed by default; open if user had it open previously
(function() {
  const panel = document.getElementById('archive-panel');
  const open = localStorage.getItem('archive_open');
  if (open !== '1') panel.classList.add('collapsed');
})();

// â”€â”€ Click [N] to seek audio to that paper's segment â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function seekTo(numEl, event) {
  event.preventDefault();
  event.stopPropagation();
  const li = numEl.closest('li');
  const ts = parseFloat(li.dataset.ts);
  const date = li.dataset.date;
  const audio = document.getElementById('audio-' + date);
  if (!audio || isNaN(ts) || ts < 0) return;
  audio.currentTime = ts;
  if (audio.paused) audio.play().catch(function() {});
}

// â”€â”€ Highlight the paper currently being spoken â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.querySelectorAll('audio[id^="audio-"]').forEach(function(audio) {
  audio.addEventListener('timeupdate', function() {
    const date = this.id.slice('audio-'.length);
    const t = this.currentTime;
    let bestLi = null, bestTs = -Infinity;
    document.querySelectorAll('li[data-date="' + date + '"][data-ts]').forEach(function(li) {
      const ts = parseFloat(li.dataset.ts);
      if (ts >= 0 && ts <= t && ts > bestTs) { bestTs = ts; bestLi = li; }
    });
    document.querySelectorAll('li[data-date="' + date + '"]').forEach(function(li) {
      li.classList.toggle('playing', li === bestLi);
    });
  });
});

loadCheckboxes();
</script>
</body>
</html>
